import { Student } from "./student"
import {Organization} from "./organization"
import {Teacher} from "./teacher"
import {Admin} from "./admin"

model Ticket {
  id        Int             @id @default(autoincrement())
  title     String
  status    TicketStatus    @default(pending)
  messages  TicketMessage[]
  type      TicketType
  studentId Int?
  student   Student?        @relation(fields: [studentId], references: [id])

  organizationId Int?
  organization   Organization? @relation(fields: [organizationId], references: [id])

  teacherId Int?
  teacher   Teacher? @relation(fields: [teacherId], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}







enum TicketType {
  organization
  student
  teacher
}

enum TicketStatus {
  pending
  answered
  solved
}

model TicketMessage {
  id Int @id @default(autoincrement())

  ticketId Int?
  ticket   Ticket? @relation(fields: [ticketId], references: [id])

  adminId Int?
  admin   Admin? @relation(fields: [adminId], references: [id])

  studentId Int?
  student   Student? @relation(fields: [studentId], references: [id])

  teacherId Int?
  teacher   Teacher? @relation(fields: [teacherId], references: [id])

  organizationId Int?
  organization   Organization? @relation(fields: [organizationId], references: [id])

  message String
  date    DateTime @default(now())
}






